<!DOCTYPE html>
<html lang="en">
<title>Making a custom blog</title>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../postStyles.css">
    <script src="./backgroundManager.js"></script>

    <!-- Primary Meta Tags -->
    <meta name="title" content="Making a custom blog - Jack's project hub" />
    <meta name="description" content="I like to create posts, but have never found a good platform to do so.<br>Follow along as I creat..." />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://jacks-project-hub.vercel.app/posts/Making a custom blog/" />
    <meta property="og:title" content="Making a custom blog - Jack's project hub" />
    <meta property="og:description" content="I like to create posts, but have never found a good platform to do so.<br>Follow along as I creat..." />
    <meta property="og:image" content="https://jacks-project-hub.vercel.app/posts/Making a custom blog/preview.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://jacks-project-hub.vercel.app/posts/Making a custom blog/" />
    <meta property="twitter:title" content="Making a custom blog - Jack's project hub" />
    <meta property="twitter:description" content="I like to create posts, but have never found a good platform to do so.<br>Follow along as I creat..." />
    <meta property="twitter:image" content="https://jacks-project-hub.vercel.app/posts/Making a custom blog/preview.png" />
</head>

<body>
    <canvas id="backgroundCanvas"></canvas>
    <div id="overlay">
        <div class="scrollOffset"></div>
        <div id="content">
            <div id="info">
                
        <div class="markup" style="color:#fff; font-style:normal; font-weight:normal; font-size:xx-large; text-decoration: none; text-decoration: none;margin:0; padding:0; word-wrap:break-word; width:100%; height:100%;">
            <div style="text-align:center;">Making a <span style="color:#0f0; font-weight:bold;"><code>|[custom]</code></span> blog</div>
        </div>
        
                <!-- will autofill on website load -->
                <script>
                    const postName = 'Making a custom blog'
                    const script = document.currentScript
                    const addStat = text => {
                        const div = document.createElement('div')
                        div.innerHTML = text
                        script.insertAdjacentElement('afterend', div)
                    }
                    document.addEventListener('DOMContentLoaded', () => {
                        fetch('../../mem.json')
                            .then(response => response.json())
                            .then(mem => {
                                addStat(`First published: <code>${Math.floor((Date.now() - mem.postsCreated[postName]) / 86400000)}</code> days ago`)
                                addStat(`Last updated: <code>${Math.floor((Date.now() - mem.postsUpdated[postName]) / 86400000)}</code> days ago`)
                                addStat(`Current hash: <code>${mem.postHashes[postName]}</code>`)
                            })
                            .catch(error => {
                                console.error('Error fetching mem for stats:', error)
                            })
                    })
                </script>
                <!-- </div> -->
                <div id="return_link">
                    <a href="../../">Home</a>
                </div>
            </div>
            <div id="post_background">
                <div id="post">
                    
        <div class="markup" style="color:#fff; font-style:normal; font-weight:normal; font-size:large; text-decoration: none; text-decoration: none;margin:0; padding:0; word-wrap:break-word; width:100%; height:100%;">
<script>; 
 (() => {
 const wrapper = document.currentScript.parentNode;
 function setValue(key, value) {
 let saveData = sessionStorage.getItem("markup") != null ? JSON.parse(sessionStorage.getItem("markup")) : {};
 saveData[key] = value;
 sessionStorage.setItem("markup", JSON.stringify(saveData));
 }
 function getValue(key) {
 return (sessionStorage.getItem("markup") != null ? JSON.parse(sessionStorage.getItem("markup")) : {})[key];
 }
 function removeKey(key) {
 let saveData = sessionStorage.getItem("markup") != null ? JSON.parse(sessionStorage.getItem("markup")) : {};
 delete saveData[key];
 sessionStorage.setItem("markup", JSON.stringify(saveData));
 }
 document.addEventListener("DOMContentLoaded", () => {
 [...wrapper.getElementsByClassName("folder")].forEach((folder) => {
 if (getValue(`id_${folder.dataset.id}`) != null) {
 const children = folder.children, open = getValue(`id_${folder.dataset.id}`);
 children[0].innerHTML = children[0].innerHTML.replace(open ? "open" : "close", open ? "close" : "open");
 children[1].style.display = open ? "" : "none";
 }
 });
 });
 if (window.markup == null)
 window.markup = {
 folder(event) {
 event.stopPropagation();
 const folder = event.target.closest(".folder"), children = folder.children, open = children[1].style.display == "none";
 children[0].innerHTML = children[0].innerHTML.replace(open ? "open" : "close", open ? "close" : "open");
 children[1].style.display = open ? "" : "none";
 setValue(`id_${folder.dataset.id}`, open);
 }
 };
 })();
; </script>
            <div style="text-align:center;"><span style="color:#0f0; font-size:xx-large;">One optional, but useful, part of any project is recording the process.</span></div><div style="text-align:left;"><br><br>I have always tried to do this, with varying amounts of success, and varying amounts of effort, and with varying medians, with my most recent median being <span style="font-style:italic;">discord</span>.<br><br>Since discord is not a place designed to be used for blogs, it lacks a lot of aspects I would want for a blog, things like:<span style="color:#0f0;"><br>&nbsp;*</span> A lack of any good way to insert media throughout a message.<span style="color:#0f0;"><br>&nbsp;*</span> A very limiting file size for anything uploaded.<span style="color:#0f0;"><br>&nbsp;*</span> No way of adding <span style="color:#f33;">c</span><span style="color:#6f6;">o</span><span style="color:#33f;">l</span><span style="color:#f33;">o</span><span style="color:#6f6;">r</span><span style="color:#33f;">e</span><span style="color:#f33;">d</span> text.<span style="color:#0f0;"><br>&nbsp;*</span> Very limited formatting.<span style="color:#0f0;"><br>&nbsp;*</span> No way to embed live code.<span style="color:#0f0;"><br>&nbsp;*</span> No good way to share posts.<span style="color:#0f0;"><br>&nbsp;*</span> No guarantee that the posts wouldn't be removed.<br>And <span style="font-style:italic; font-weight:bold;">no way</span> to change any of this.<span style="font-size:x-large;"><div style="display:block; height:2em; line-height:2em;"></div>So I decided to make my own blog</span><div style="display:block; height:1em; line-height:1em;"></div>But this comes with a lot of challenges too:<span style="color:#0f0;"><br>&nbsp;*</span> How am I going to model this blog?<span style="color:#0f0;"><br>&nbsp;*</span> What do I want the process of creating a post to look like?<span style="color:#0f0;"><br>&nbsp;*</span> What all do I want a post to be capable of?<span style="color:#0f0;"><br>&nbsp;*</span> Whats going to tie all the posts together?<span style="color:#0f0;"><br>&nbsp;*</span> Have I fed my cat yet?<span style="color:#0f0;"><br>&nbsp;*</span> How am I going to publish this blog?<br><br>Some of there questions have easy answers:<span style="color:#0f0;"><br>&nbsp;*</span><span style="font-style:italic;"> What do I want the process of creating a post to look like? </span>I want to write text as markup in a text file, putting links to media in the text as needed, and just putting all the media and text in a folder and having it automatically generate a post.  <span style="color:#0f0;"><br>&nbsp;*</span><span style="font-style:italic;"> Whats going to tie all the posts together? </span>A home page with previews of each post that can be clicked to open them.<span style="color:#0f0;"><br>&nbsp;*</span><span style="font-style:italic;"> Have I fed my cat yet? </span>Yes, though she says otherwise.<span style="color:#0f0;"><br>&nbsp;*</span><span style="font-style:italic;"> How am I going to publish this blog? </span>I can just push to github, then use Vercel to host the site.<br><br>Starting off I wanted to use a new design for project: processing all the posts on my local machine, then only publishing the translated files, seeing as this needs file manipulation to do (since all the files for the finished website would be generated by other code), and I am most familiar with JS, node seemed like the logical choice for a base.<br><br>Time to start: I make a script to scan all the files in a specific folder for posts, <span style="font-size:small;">processing them all slightly to format them for html, </span><span style="font-size:x-small;">putting them together in a folder, </span><span style="font-size:xx-small;">and pushing them to github...</span><br><br>I had forgot an important step: before I can have posts I need a home page to get to the posts from.<br>But I wanted this page to look <span style="font-style:italic;">nice</span>, and not just be an empty page of links, so I looked around for inspiration, and I found this:<br><img src="./factorioBlog.png" alt="factorioBlog.png">And look at it: a nice title section, a consistent color scheme, inline images, and (not shown) videos!<br>But more importantly, <span style="font-style:italic;">the background</span>, it ties the post together without making it feel like it consumes all the screen space, plus with an already semi vertical design making this site work on mobile will be much easier.<br><br>Now that I had a layout I needed a background, for the factorio example a factory in the background is in theme, but for my blog the topic changes, I can't just have an image of a finished project (or I <span style="font-style:italic;">could</span> but I don't like the idea of that), I wanted something relevant to all my projects.<br><br>But what do all my projects have in common?<span style="font-weight:bold;"><div style="display:block; height:0.5em; line-height:0.5em;"></div>Programming.</span> <span style="font-style:italic;"><div style="display:block; height:0.5em; line-height:0.5em;"></div>I knew what I wanted:</span></div><div style="text-align:center;"><span style="color:#0f0; font-weight:bold; font-size:x-large;"><div style="display:block; height:1.5em; line-height:1.5em;"></div>Live backgrounds</span></div><div style="text-align:left;"><div style="display:block; height:1.5em; line-height:1.5em;"></div>What is a live background? For my use cases a live background is any background that is not pre generated, but is instead has a small program running to generate the background live.<br><br>Planning: what power did I want to give these backgrounds? How do I want to structure them? And how do I want to theme them?<br><br>Next I created a simple system to create live backgrounds thats answers these questions:<span style="color:#0f0;"><br>&nbsp;*</span> Each background is a js module.<span style="color:#0f0;"><br>&nbsp;*</span> The backgrounds render on a canvas element set behind all the websites content.<span style="color:#0f0;"><br>&nbsp;*</span> Each background exports a <span style="color:#666;"><code>start</code></span> and a <span style="color:#666;"><code>stop</code></span> function.<span style="color:#0f0;"><br>&nbsp;*</span> Each background grabs the canvas and context each time it's start function is ran.<span style="color:#0f0;"><br>&nbsp;*</span> A central script schedules starting and stopping each background, as well as mixing them to ensure each one gets the appropriate screen time.<br><br>And while this was nice, the system had its problems:<span style="color:#0f0;"><br>&nbsp;*</span> Since each background was in charge of keeping a loop, when I ended one background and started a new one, sometimes the old background would run one more loop.<span style="color:#0f0;"><br>&nbsp;*</span> It had too much repeated code for each background.<span style="color:#0f0;"><br>&nbsp;*</span> With each background grabbing the canvas and context every time they start, it could sometimes lead to bugs where one background would have the context when another background tried to use it.<br><br>While this isn't a lot of bugs, it really killed the polished feel I wanted, with small bugs happening frequently, so I needed a new system:<span style="color:#0f0;"><br>&nbsp;*</span> Each background is still a js module.<span style="color:#0f0;"><br>&nbsp;*</span> The backgrounds still render on a background canvas.<span style="color:#0f0;"><br>&nbsp;*</span> Each background exports a <span style="color:#666;"><code>start</code></span>, <span style="color:#666;"><code>update</code></span>, and a <span style="color:#666;"><code>stop</code></span> function.<span style="color:#0f0;"><br>&nbsp;*</span> Each background is given the canvas and context through its exposed functions.<span style="color:#0f0;"><br>&nbsp;*</span> Instead of a background creating its own loop, the central script is in charge of updating the background each frame.<br><br>With just these small changes, the backgrounds ran smoothly, with no issues with them running when they shouldn't.<br>They were done.</div><div style="text-align:center;"><span style="font-style:italic; font-size:small;"><br> Want to see more?</span></div>
                            <div class="folder" data-id=9>
                                <div style="cursor: pointer; text-align:center;" onclick="window.markup.folder(event)">
                                    <span style="font-size:small;">|[click to open]</span>
                                </div>
                                <div style="display:none;">
                                    <div style="text-align:center;"><br><video src="./liveBackgrounds.mp4" controls alt="liveBackgrounds.mp4" style="width:50%"></video></div><div style="text-align:left;"><span style="font-size:small;"><br>Some other features I added include:</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> When changing backgrounds, the canvas blurs and fades out, to remove any jarring changes.</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> The scripts for the backgrounds are not loaded until they are needed, this can speed up the loading of the website there are large backgrounds (or a large number of backgrounds).</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> Backgrounds changing the size and complexity to run fast on mobile devices</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> Live backgrounds used in posts can be shared with the home page's backgrounds.</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> A few live backgrounds with a consistent theme.</span></div>
                                </div>
                            </div>
                            <div style="text-align:center;"><span style="color:#0f0; font-size:xx-large;"><br> ------------------------- </span><br>Now that I had backgrounds <span style="font-style:italic;">and</span> website structure, it was time for the hard part:<span style="color:#0f0; font-weight:bold; font-size:x-large;"><br>Making the markup</span></div><div style="text-align:left;"><span style="font-style:italic;"><br>But what is markup?</span><br>Markup is the way I can write with text with formatting, it's how I can do <span style="color:#0f0; font-style:italic; font-weight:bold; font-size:xx-large;">this</span><br>When I used discord there were a few different ways to write markup, there was <span style="font-style:italic;">*italic*</span>, <span style="font-weight:bold;">**bold**</span>, <span style="font-style:italic; font-weight:bold;">***bold italic***</span>, <span style="text-decoration: line-through;">~~strikethrough~~</span>, or <code>``code``</code>.<br><br>But that style can cause problems, sometimes when sending text not designed for discords formatting there would be unwanted markup, and there was no good to remember what markup does what, so I needed my own style: and I like the "tags" method: where my markup is broken into two types, text and tag groups: "|[tag1 tag2 tag3] and text", this way I can have whatever I want to be tags as tags, without having to worry about using symbols or patterns used in the regular text.<br><br>The <span style="font-style:italic;">only</span> thing I have to worry about is what symbols to use to open and close a group of tags, and since I wanted something visually compact, I decided on |[ to open and ] to close, with the only restriction on the tags being that they cannot contain either the opening or closing symbols.<br><br>Time for an example:<br>|[align center size large]Before |[color #0f0]green|[color] it was boring<br>Would become:</div><div style="text-align:center;">Before <span style="color:#0f0;">green</span> it was boring</div><div style="text-align:left;"><span style="font-style:italic;"><br>How does it work?</span><span style="color:#0f0; font-style:italic;"><br>&nbsp;1</span> The markup file (which is just stored as plaintext) is read and turned into one long string, removing any line breaks. <span style="color:#0f0; font-style:italic;"><br>&nbsp;2</span> The string is split by at each "|[" unless the symbol directly after is a "|" (so to write "|[", I would write "|[|").<span style="color:#0f0; font-style:italic;"><br>&nbsp;3</span> Each slice of the string is split at the first "]".<span style="color:#0f0; font-style:italic;"><br>&nbsp;4</span> Each slice within a |[] gets split at each " ", resulting in an array of each word inside the tag group.<span style="color:#0f0; font-style:italic;"><br>&nbsp;5</span> The array of arrays gets flattened, resulting in an array of items that are each either an array of tags, or a string.<span style="color:#0f0; font-style:italic;"><br>&nbsp;6</span> The items are looped through, if the item is a string, a styled span element gets pushed to the html with the text of the item, otherwise each tag is looped through, applying its effects.<span style="color:#0f0; font-style:italic;"><br>&nbsp;7</span> The finished html is returned, with the default styles, any needed scripts, and the translated markup inside.</div><div style="text-align:center;"><span style="font-size:x-large;"><br>Now for my favorite feature of the markup: </span><span style="font-size:x-large;"><br><script src="liveCodeSnippet.js"></script> </span></div><div style="text-align:left;"><br>This means I can run arbitrary js code anywhere throughout the posts, with each of them able to create a canvas or other html elements for rendering or inputting.<br><br>And arbitrary code means I can change <span style="font-style:italic; font-weight:bold;">any aspect of the website</span>, like adding the flickering text above, <script src="changingTextSnippet.js"></script>, or text that changes the background color when clicked? <script src="backgroundColorSnippet.js"></script> And so much more<script src="trailingSnippet.js"></script> </div><div style="text-align:center;"><span style="font-size:small;"><br>(Of course there are </span><span style="font-style:italic; font-size:small;">many</span><span style="font-size:small;"> other small steps in translating markup, and many other features with it, but if I explained every aspect of the code this post would be far too long, however if you are interested in what tags I have created, I have included all the ones I have created at the time of writing this post below)</span></div>
                            <div class="folder" data-id=10>
                                <div style="cursor: pointer; text-align:center;" onclick="window.markup.folder(event)">
                                    <span style="font-size:small;">|[click to open]</span>
                                </div>
                                <div style="display:none;">
                                    <div style="text-align:center;"></div><div style="text-align:left;"><span style="font-size:small;">the tags are below, items in the first column are the keywords, items in the second column are values to be used.</span><span style="font-size:small;"><br>a !-> in the second column indicates the action that happens if non of the other options are there</span><span style="font-size:small;"><br>values in the second column with a [] signify that you put a value there (but don't include the [])</span><span style="font-size:small;"><br>values in the second column with a ?[] signify that the value is optional</span><span style="color:#0f0; font-size:small;"><br><br>&nbsp;*</span><span style="font-size:small;"> color: -> sets the text color to the most efficient hex value that represents prop 1</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> #[rgb] -> each range is in the value 0-f in base 16</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> #[rgba]</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> #[rrggbb]</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> #[rrggbbaa]</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> rgb([r],[g],[b]) -> each value is in the range 0-255</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> rgb([r],[g],[b],[a])</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> rgba([r],[g],[b])</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> rgba([r],[g],[b],[a])</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> sets color to the default color</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> italic: -> sets whether text will be italic</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> on | true</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> off | false</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> toggles italics</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> bold: -> sets whether text will be bold</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> on | true</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> off | false</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> toggles bold text</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> space: -> adds [number] spaces using '&nbsp;' after</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [number]</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> defaults to 1</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> tabs: -> adds [number] spaces * tabSize (defaults to 3) after</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [number]</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> defaults to 1</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> break: -> used to make new lines</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [number] -> creates a break and then inserts a blank line of [number] lines in height</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> just adds &ltbr></span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> size: -> sets the text size</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> xx-small | x-small | smaller | small | medium | large | larger | x-large | xx-large -> uses the default sizes</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [number] -> (viewport width + viewport height) / 2 * [number], [number] is in the range [number] >= 0.02</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> sets size to the default size</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> code: -> sets whether text will be code using &ltcode>&lt/code></span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> on | true</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> off | false</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> toggles code text</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> align: -> sets which direction text should align (changing align triggers a break)</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> left | center | right</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> sets align to the default align</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> reset: </span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [property] -> sets [property] to the default [property]</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> resets the full style to the default style</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> default: -> changes the default used for many tags, but does not change the default retrospectively</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> global -> sets the global default, this is the default used to generate the local (the default always used) default, also sets the local default </span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> sets the default style to the current style</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> fold: -> creates foldable content, with all content until the fold close being inside (fold triggers a break)</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> open | close -> starts a fold that is open | closed at start</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> closes a fold</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> image: -> embeds an image in the next line</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [name] [size] -> size is relative to the div, so a size of 1 would fill the space, or a size of .5 could fit two images side by side</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [name] !-> defaults to 1</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> showMarkup: -> sets whether the markup tags will be hidden (defaults to false)</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> on | true</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> off | false</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> toggles</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> COMMENT: -> "comments" out the line, must be alone in the tag bracket, and the first thing in the line: |[COMMENT]</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> video: -> embeds a video in the next line</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [name] [size] -> size is relative to the div, so a size of 1 would fill the space, or a size of .5 could fit two videos side by side</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [name] !-> defaults to 1</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> strike: -> sets whether text will have strikethrough</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> on | true</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> off | false</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> !-> toggles strikethrough</span><span style="color:#0f0; font-size:small;"><br>&nbsp;*</span><span style="font-size:small;"> script: -> embeds a piece of live code</span><span style="color:#0f0; font-size:small;"><br>&nbsp;* *</span><span style="font-size:small;"> [path] -> where to find the script</span></div>
                                </div>
                            </div>
                            <div style="text-align:center;"><span style="color:#0f0; font-size:xx-large;"><br> ------------------------- </span></div><div style="text-align:left;"><br>At this point I could be done, the website is fully functional, it supports a rich markup, and it has the theme I was wanting.</div><div style="text-align:center;"><span style="font-size:x-large;"><div style="display:block; height:0.5em; line-height:0.5em;"></div>But why stop there?</span><span style="font-style:italic;"><br>There's always stuff to add...</span><span style="color:#0f0; font-size:x-large;"><br><br>Link previews</span></div>
                            <div class="folder" data-id=11>
                                <div style="cursor: pointer; text-align:center;" onclick="window.markup.folder(event)">
                                    <span style="color:#0f0;">|[click to open]</span>
                                </div>
                                <div style="display:none;">
                                    <div style="text-align:center;"></div><div style="text-align:left;"><br>What do I mean by link previews? I mean the nice attachment that sometimes appears when you paste a link.</div><div style="text-align:center;"><br><img src="./exampleLinkPreview.png" alt="exampleLinkPreview.png" style="width:50%"></div><div style="text-align:left;">Turns out there a few main ways of creating these previews:<br>Theres the normal <code>meta name="title"</code> and <code>meta name="description"</code> elements.<br> But theres also the Open Graph Protocol which supports:<span style="color:#0f0;"><br>&nbsp;*</span> <code>og:title</code><span style="color:#0f0;"><br>&nbsp;*</span> <code>og:type</code> eg: article<span style="color:#0f0;"><br>&nbsp;*</span> <code>og:url</code><span style="color:#0f0;"><br>&nbsp;*</span> <code>og:description</code><span style="color:#0f0;"><br>&nbsp;*</span> <code>og:image</code><br>And <span style="text-decoration: line-through;">Twitter's</span> X's protocol which supports:<span style="color:#0f0;"><br>&nbsp;*</span> <code>twitter:card</code><span style="color:#0f0;"><br>&nbsp;*</span> <code>twitter:type</code> eg: article<span style="color:#0f0;"><br>&nbsp;*</span> <code>twitter:url</code><span style="color:#0f0;"><br>&nbsp;*</span> <code>twitter:description</code><span style="color:#0f0;"><br>&nbsp;*</span> <code>twitter:image</code><br>Unfortunately there is no one clear method to be supported on all platforms, so I just used all of the above methods at once.<br><br>Now the problem of what to display, the title, type, url, description, and card are clear, I already have these defined for the previews on the home page, but what to use for the image wasn't clear, I needed something to portray the post and the site.<br><br>...Or I could <span style="font-style:italic;">not</span> add a new requirement to each post to have a preview image, instead just taking an image of the post for the preview. But getting that image is harder, I had no good way to turn the website's files into an image except rendering it in a browser...<br><br>I <span style="font-weight:bold;">could</span> just render it with a browser and take a screenshot, I just have to do so automatically every time the post changes.<br>Since the previews are static, I can create them before I publish the site, eg I can get the screenshots using node.<br>Before I can do that, I need to define the steps:<span style="color:#0f0;"><br>&nbsp;1</span> Create a server for the website so a browser can "visit" it.<span style="color:#0f0;"><br>&nbsp;2</span> Open a browser I can control.<span style="color:#0f0;"><br>&nbsp;3</span> Navigate to the page.<span style="color:#0f0;"><br>&nbsp;4</span> Screenshot the page and save it to the websites folder.<span style="color:#0f0;"><br>&nbsp;5</span> Close the browser.<span style="color:#0f0;"><br>&nbsp;6</span> Kill the server.<br>And since I am using node, finding the tools to do this was surprisingly simple, I can use the <code>express</code> module for the server, and the <code>puppeteer</code> module to do all the browser stuff. <br><br>Since I don't have to worry about unknown file changes while the server is up, the rest of the screenshotting process went smoothly, with the only other real problem being speed: opening a server, then a browser, then a page, screenshotting, and closing it all for a single screenshot takes longer than the entirety of my program before (up to around 1 second from 1/10 of a second), I managed to optimize it a lot though, only screenshotting if the content changed, reusing the same server / browser for every screenshot, and only opening the server / browser if a new screenshot is needed.<br><br>It was worth it in the end, now I have nice link previews too:</div><div style="text-align:center;"><br><img src="./linkPreview.png" alt="linkPreview.png" style="width:50%"></div>
                                </div>
                            </div>
                            <div style="text-align:center;"><span style="color:#0f0; font-size:xx-large;"> ------------------------- </span><span style="color:#0f0; font-size:x-large;"><br>Live post previews</span></div>
                            <div class="folder" data-id=12>
                                <div style="cursor: pointer; text-align:center;" onclick="window.markup.folder(event)">
                                    <span style="color:#0f0;">|[click to open]</span>
                                </div>
                                <div style="display:none;">
                                    <div style="text-align:center;"></div><div style="text-align:left;"><br>One of the biggest annoyances in writing a post now is the time between writing some markup and seeing the results, I have to save the file, run the website file generation program, launch a server for the files, and navigate to the server from a browser to see any change.<br><br>No, what I wanted was to see the resulting page with <span style="font-style:italic;">every single change.</span><br><br>But fixing this was actually surprisingly easy, all I have to do it make a local server to serve the website's files, inject a websocket into every page to listen for reload messages, and have the server send a message any time a file it's watching changes.[break break]And that's what I did, and now whenever I change the text of a post the site automatically updates with the new post, <span style="font-style:italic;">with full markup support</span>.</div>
                                </div>
                            </div>
                            <div style="text-align:center;"><span style="color:#0f0; font-size:xx-large;"> ------------------------- </span><br><br>Now there are a lot more features I want to add, comments, a downloadable app, vscode support for highlighting, a markup editor with a gui, etc, but I've spent too long on this post and have other things to work on.<span style="color:#0f0; font-size:xx-large;"><br>That's it for todays post, thanks for reading!</span></div>
        </div>
        
                </div>
            </div>
            <div id="returnToTopButton">
                <span onclick="window.scroll({top:0,left:0,behavior:'smooth'})">Return to top</span>
            </div>
        </div>
        <div class="scrollOffset"></div>
    </div>
</body>

</html>